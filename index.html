<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Car Racing Game</title>
<style>
body{
    margin:0;
    overflow:hidden;
    background:#222;
    font-family:Arial;
    text-align:center;
    color:white;
}
#gameArea{
    width:400px;
    height:600px;
    background:#333;
    margin:20px auto;
    position:relative;
    overflow:hidden;
    border:5px solid white;
}
.roadLine{
    width:10px;
    height:100px;
    background:white;
    position:absolute;
    left:195px;
}
.car{
    width:50px;
    height:90px;
    position:absolute;
    bottom:20px;
    background:red;
    left:175px;
    border-radius:10px;
}
.enemy{
    width:50px;
    height:90px;
    position:absolute;
    background:yellow;
    border-radius:10px;
}
#score{
    font-size:20px;
}
#startBtn{
    padding:10px 20px;
    font-size:18px;
    cursor:pointer;
}
</style>
</head>
<body>

<h1>ðŸš— Car Racing Game</h1>
<p id="score">Score: 0</p>
<button id="startBtn">Start Game</button>

<div id="gameArea"></div>

<script>
const gameArea = document.getElementById("gameArea");
const scoreDisplay = document.getElementById("score");
const startBtn = document.getElementById("startBtn");

let player = { speed:5, score:0 };
let keys = { ArrowLeft:false, ArrowRight:false };

startBtn.addEventListener("click", startGame);

document.addEventListener("keydown", e=>{
    if(e.key==="ArrowLeft" || e.key==="ArrowRight"){
        keys[e.key]=true;
    }
});
document.addEventListener("keyup", e=>{
    if(e.key==="ArrowLeft" || e.key==="ArrowRight"){
        keys[e.key]=false;
    }
});

function startGame(){
    gameArea.innerHTML="";
    startBtn.style.display="none";
    player.speed=5;
    player.score=0;

    for(let i=0;i<5;i++){
        let roadLine=document.createElement("div");
        roadLine.classList.add("roadLine");
        roadLine.style.top=(i*150)+"px";
        gameArea.appendChild(roadLine);
    }

    let car=document.createElement("div");
    car.classList.add("car");
    gameArea.appendChild(car);

    player.x=car.offsetLeft;
    player.y=car.offsetTop;

    for(let i=0;i<3;i++){
        let enemy=document.createElement("div");
        enemy.classList.add("enemy");
        enemy.style.top=-(i*200)+"px";
        enemy.style.left=Math.floor(Math.random()*350)+"px";
        gameArea.appendChild(enemy);
    }

    window.requestAnimationFrame(playGame);
}

function isCollide(a,b){
    let aRect=a.getBoundingClientRect();
    let bRect=b.getBoundingClientRect();
    return !(aRect.bottom < bRect.top ||
             aRect.top > bRect.bottom ||
             aRect.right < bRect.left ||
             aRect.left > bRect.right);
}

function moveRoadLines(){
    let lines=document.querySelectorAll(".roadLine");
    lines.forEach(line=>{
        let top=line.offsetTop;
        if(top>=600){
            top-=750;
        }
        line.style.top=(top+player.speed)+"px";
    });
}

function moveEnemies(car){
    let enemies=document.querySelectorAll(".enemy");
    enemies.forEach(enemy=>{
        if(isCollide(car,enemy)){
            endGame();
        }
        let top=enemy.offsetTop;
        if(top>=600){
            top=-200;
            enemy.style.left=Math.floor(Math.random()*350)+"px";
        }
        enemy.style.top=(top+player.speed)+"px";
    });
}

function playGame(){
    let car=document.querySelector(".car");

    moveRoadLines();
    moveEnemies(car);

    if(keys.ArrowLeft && player.x>0){
        player.x-=player.speed+2;
    }
    if(keys.ArrowRight && player.x<350){
        player.x+=player.speed+2;
    }

    car.style.left=player.x+"px";

    player.score++;
    player.speed=5+Math.floor(player.score/500);
    scoreDisplay.innerText="Score: "+player.score;

    window.requestAnimationFrame(playGame);
}

function endGame(){
    alert("Game Over! Your Score: "+player.score);
    startBtn.style.display="inline-block";
}
</script>

</body>
</html>
